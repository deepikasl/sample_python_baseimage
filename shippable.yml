language: python
#build_image: shippableimages/ubuntu1204_python

python:
  - 3.3
addons:
  postgresql: "9.3"
  
#services:
 # - cassandra
  
install:
  - pip install -r requirements.txt

# Make folders for the reports  
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - which python
  - coverage run `which nosetests` test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - coverage xml -o shippable/codecoverage/coverage.xml
   
integrations:
  
  notifications:
    - integrationName: email
      type: email
      recipients: 
        - shiphitchcock1@gmail.com
      #  - vidya@shippable.com
      
      on_pull_request: always
      on_start: always
      on_success: always
      on_failure: always

    - integrationName: ship-slack
      type: slack
      recipients: 
        - "#hitchcock1-public"
        - pvt-channel
      
      on_start: always
      on_pull_request: always
      on_success: always
      on_failure: always
 
    - integrationName: irc
      type: irc
      recipients: 
        - "chat.freenode.net#test-cock1"
        #- "chat.freenode.net#hitchcok2-irc"
      
      on_start: always
      on_pull_request: always
      on_success: always
      on_failure: always
   
    - integrationName: ship-hipchat
      type: hipchat
      recipients: 
        - "#hitchcock1"
        - "#hitchcock1pvt"
        - "@shiphitchcock1"
      
      on_start: always
      on_pull_request: always
      on_success: always
      on_failure: always  
